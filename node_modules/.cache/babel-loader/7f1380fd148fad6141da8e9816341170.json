{"ast":null,"code":"import \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: 'Exam',\n  data: function data() {\n    return {\n      tableData: {\n        id: '',\n        examName: '',\n        date: '',\n        status: ''\n      },\n      ExamlogVisible: false,\n      addExam: {\n        examName: '',\n        description: '',\n        date: '',\n        status: ''\n      },\n      search: '',\n      clearData: [{\n        examName: 'sdsd',\n        classId: '21',\n        className: '1',\n        count: '1',\n        score: '1',\n        total: '1'\n      }],\n      addClass: {\n        classId: '',\n        classNmae: '',\n        school: ''\n      },\n      addClassVisible: false,\n      loading: false,\n      form: {\n        name: '',\n        region: '',\n        date1: '',\n        date2: '',\n        delivery: false,\n        type: [],\n        resource: '',\n        desc: ''\n      },\n      formLabelWidth: '80px',\n      timer: null,\n      props: {\n        multiple: true\n      },\n      options: [{\n        value: 1,\n        label: '东南',\n        children: [{\n          value: 2,\n          label: '上海',\n          children: [{\n            value: 3,\n            label: '普陀'\n          }, {\n            value: 4,\n            label: '黄埔'\n          }, {\n            value: 5,\n            label: '徐汇'\n          }]\n        }, {\n          value: 7,\n          label: '江苏',\n          children: [{\n            value: 8,\n            label: '南京'\n          }, {\n            value: 9,\n            label: '苏州'\n          }, {\n            value: 10,\n            label: '无锡'\n          }]\n        }, {\n          value: 12,\n          label: '浙江',\n          children: [{\n            value: 13,\n            label: '杭州'\n          }, {\n            value: 14,\n            label: '宁波'\n          }, {\n            value: 15,\n            label: '嘉兴'\n          }]\n        }]\n      }, {\n        value: 17,\n        label: '西北',\n        children: [{\n          value: 18,\n          label: '陕西',\n          children: [{\n            value: 19,\n            label: '西安'\n          }, {\n            value: 20,\n            label: '延安'\n          }]\n        }, {\n          value: 21,\n          label: '新疆维吾尔族自治区',\n          children: [{\n            value: 22,\n            label: '乌鲁木齐'\n          }, {\n            value: 23,\n            label: '克拉玛依'\n          }]\n        }]\n      }]\n    };\n  },\n  mounted: function mounted() {\n    this.selectAll();\n  },\n  methods: {\n    selectAll: function selectAll() {\n      var _this = this;\n\n      axios.get(\"http://172.25.148.89/exams\").then(function (res) {\n        _this.tableData = res.data.data;\n      });\n    },\n    handleaddExam: function handleaddExam() {\n      var _this2 = this;\n\n      axios.post(\"http://172.25.148.89/exams\", this.addExam).then(function (res) {\n        _this2.ExamlogVisible = false;\n\n        if (res.data.code == 20011) {\n          _this2.$message.success('添加成功');\n\n          _this2.selectAll();\n        } else if (res.data.code == 20010) {\n          _this2.$message.error('添加失败');\n        }\n\n        _this2.addExam.examName = '', _this2.addExam.description = '', _this2.addExam.date = '', _this2.addExam.status = '';\n      });\n    },\n    selectClearData: function selectClearData(row) {\n      var _this3 = this;\n\n      axios.get(\"http://172.25.148.89/texam/\" + row.id).then(function (res) {\n        _this3.clearData = res.data.data;\n      });\n    },\n    handleClose: function handleClose(done) {\n      var _this4 = this;\n\n      if (this.loading) {\n        return;\n      }\n\n      this.$confirm('确定要提交表单吗？').then(function (_) {\n        _this4.loading = true;\n        _this4.timer = setTimeout(function () {\n          done(); // 动画关闭需要一定的时间\n\n          setTimeout(function () {\n            _this4.loading = false;\n          }, 400);\n        }, 2000);\n      }).catch(function (_) {});\n    },\n    cancelForm: function cancelForm() {\n      this.loading = false;\n      this.addClassVisible = false;\n      clearTimeout(this.timer);\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;EACAA,YADA;EAEAC,IAFA,kBAEA;IACA;MACAC;QACAC,MADA;QAEAC,YAFA;QAGAC,QAHA;QAIAC;MAJA,CADA;MAOAC,qBAPA;MAQAC;QACAJ,YADA;QAEAK,eAFA;QAGAJ,QAHA;QAIAC;MAJA,CARA;MAcAI,UAdA;MAeAC;QACAP,gBADA;QAEAQ,aAFA;QAGAC,cAHA;QAIAC,UAJA;QAKAC,UALA;QAMAC;MANA,EAfA;MAuBAC;QACAL,WADA;QAEAM,aAFA;QAGAC;MAHA,CAvBA;MA4BAC,sBA5BA;MA6BAC,cA7BA;MA8BAC;QACAtB,QADA;QAEAuB,UAFA;QAGAC,SAHA;QAIAC,SAJA;QAKAC,eALA;QAMAC,QANA;QAOAC,YAPA;QAQAC;MARA,CA9BA;MAwCAC,sBAxCA;MAyCAC,WAzCA;MA0CAC;QAAAC;MAAA,CA1CA;MA2CAC;QACAC,QADA;QAEAC,WAFA;QAGAC;UACAF,QADA;UAEAC,WAFA;UAGAC,WACA;YAAAF;YAAAC;UAAA,CADA,EAEA;YAAAD;YAAAC;UAAA,CAFA,EAGA;YAAAD;YAAAC;UAAA,CAHA;QAHA,GAQA;UACAD,QADA;UAEAC,WAFA;UAGAC,WACA;YAAAF;YAAAC;UAAA,CADA,EAEA;YAAAD;YAAAC;UAAA,CAFA,EAGA;YAAAD;YAAAC;UAAA,CAHA;QAHA,CARA,EAgBA;UACAD,SADA;UAEAC,WAFA;UAGAC,WACA;YAAAF;YAAAC;UAAA,CADA,EAEA;YAAAD;YAAAC;UAAA,CAFA,EAGA;YAAAD;YAAAC;UAAA,CAHA;QAHA,CAhBA;MAHA,GA4BA;QACAD,SADA;QAEAC,WAFA;QAGAC;UACAF,SADA;UAEAC,WAFA;UAGAC,WACA;YAAAF;YAAAC;UAAA,CADA,EAEA;YAAAD;YAAAC;UAAA,CAFA;QAHA,GAOA;UACAD,SADA;UAEAC,kBAFA;UAGAC,WACA;YAAAF;YAAAC;UAAA,CADA,EAEA;YAAAD;YAAAC;UAAA,CAFA;QAHA,CAPA;MAHA,CA5BA;IA3CA;EA4FA,CA/FA;EAiGAE,OAjGA,qBAiGA;IACA;EAEA,CApGA;EAqGAC;IACAC,SADA,uBACA;MAAA;;MACAC;QACA;MAEA,CAHA;IAIA,CANA;IAOAC,aAPA,2BAOA;MAAA;;MAEAD;QACA;;QACA;UACA;;UACA;QACA,CAHA,MAGA;UACA;QACA;;QACA,8BACA,+BADA,EAEA,wBAFA,EAGA,0BAHA;MAKA,CAbA;IAeA,CAxBA;IAyBAE,eAzBA,2BAyBAC,GAzBA,EAyBA;MAAA;;MAEAH;QACA;MACA,CAFA;IAGA,CA9BA;IA+BAI,WA/BA,uBA+BAC,IA/BA,EA+BA;MAAA;;MACA;QACA;MACA;;MACA,2BACAC,IADA,CACA;QACA;QACA;UACAD,OADA,CAEA;;UACAE;YACA;UACA,CAFA,EAEA,GAFA;QAGA,CANA,EAMA,IANA;MAOA,CAVA,EAWAC,KAXA,CAWA,eAXA;IAYA,CA/CA;IAgDAC,UAhDA,wBAgDA;MACA;MACA;MACAC;IACA;EApDA;AArGA","names":["name","data","tableData","id","examName","date","status","ExamlogVisible","addExam","description","search","clearData","classId","className","count","score","total","addClass","classNmae","school","addClassVisible","loading","form","region","date1","date2","delivery","type","resource","desc","formLabelWidth","timer","props","multiple","options","value","label","children","mounted","methods","selectAll","axios","handleaddExam","selectClearData","row","handleClose","done","then","setTimeout","catch","cancelForm","clearTimeout"],"sourceRoot":"views/exam","sources":["index.vue"],"sourcesContent":["<template>\r\n<div>\r\n     \r\n  <br>\r\n  <el-row>\r\n\r\n    <el-button type=\"primary\" round>新增考试</el-button>\r\n    <el-button type=\"danger\" @click=\"deleteByIds\" round>批量删除</el-button>\r\n  </el-row>\r\n<br>\r\n  <el-table :data=\"tableData.filter(data => !search || data.name.toLowerCase().includes(search.toLowerCase()))\"\r\n    style=\"width: 100%\" max-height=\"400\">\r\n    \r\n    <el-table-column\r\n      label=\"序号\" type=\"index\">\r\n    </el-table-column>\r\n\r\n    <el-table-column\r\n      label=\"名称\"\r\n      prop=\"examName\" header-align=\"center\" align=\"center\">\r\n    </el-table-column>\r\n        <el-table-column\r\n      label=\"日期\"\r\n      prop=\"date\" header-align=\"center\" align=\"center\">\r\n    </el-table-column>\r\n        <el-table-column\r\n      label=\"状态\"\r\n       prop=\"status\" header-align=\"center\" align=\"center\">\r\n      \r\n    </el-table-column>\r\n    <el-table-column\r\n      align=\"right\">\r\n      <template slot=\"header\" >\r\n        <el-input\r\n          v-model=\"search\"\r\n          size=\"mini\"\r\n          placeholder=\"输入关键字搜索\"/>\r\n      </template>\r\n      \r\n      <template slot-scope=\"scope\" >\r\n        <el-button size=\"mini\" type=\"primary\" @click=\"selectClearData(scope.row)\">考试详情</el-button>\r\n       <el-button size=\"mini\" @click=\"addClassVisible = true\">新增班级</el-button>\r\n        <el-button\r\n          size=\"mini\"\r\n          type=\"danger\"\r\n          @click=\"handleDelete(scope.$index, scope.row)\">Delete</el-button>\r\n      </template>\r\n    </el-table-column>\r\n\r\n  </el-table>\r\n      <!--    新增窗口-->\r\n    <el-dialog\r\n            title=\"新增考试\"\r\n            :visible.sync=\"ExamlogVisible\"\r\n            width=\"18%\">\r\n\r\n        <el-form ref=\"form\" :model=\"addExam\" label-width=\"40px\" style=\"text-align: center\">\r\n            <el-form-item label=\"名称\">\r\n                <el-input v-model=\"addExam.examName\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"描述\">\r\n                <el-input v-model=\"addExam.description\" placeholder=\"请输入内容\"></el-input>\r\n            </el-form-item>\r\n          <el-form>\r\n              <div class=\"block\">\r\n              <span class=\"demonstration\">默认</span>\r\n              <el-date-picker\r\n                v-model=\"addExam.date\"\r\n                type=\"date\"\r\n                placeholder=\"选择日期\">\r\n              </el-date-picker>\r\n          </div>\r\n        </el-form>\r\n            <el-form-item label=\"\">\r\n             <el-switch\r\n                v-model=\"addExam.status\"\r\n                active-text=\"立即开启\"\r\n                inactive-text=\"稍后开启\">\r\n              </el-switch>\r\n            </el-form-item>\r\n            <el-button type=\"primary\" @click=\"handleaddExam\">提交</el-button>\r\n            <el-button  @click=\"ExamlogVisible = false\">取消</el-button>\r\n        </el-form>\r\n\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n\r\n  </span>\r\n    </el-dialog>\r\n    <!-- 考试详情 -->\r\n    <template>\r\n <el-table\r\n      :data=\"clearData\"\r\n      style=\"width: 100%\" max-height=\"300\">\r\n        <el-table-column\r\n        label=\"序号\" type=\"index\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"className\"\r\n          label=\"班级名称\"\r\n          width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"count\"\r\n          label=\"已填写人数\">\r\n        </el-table-column>\r\n        <el-table-column\r\n        prop=\"score\"\r\n        label=\"分数\">\r\n        </el-table-column>\r\n        <el-table-column\r\n        prop=\"total\"\r\n        label=\"总人数\"> \r\n        </el-table-column>\r\n    </el-table>\r\n    </template>\r\n    <!-- 添加考试班级 -->\r\n    <el-drawer\r\n      title=\"请添加参加考试的班级\"\r\n      :before-close=\"handlClose\"\r\n      :visible.sync=\"addClassVisible\"\r\n      direction=\"ltr\"\r\n      custom-class=\"demo-drawer\"\r\n      ref=\"drawer\"\r\n      >\r\n      <div class=\"demo-drawer__content\">\r\n        <el-form :model=\"form\">\r\n          <el-form-item label=\"活动区域\" :label-width=\"formLabelWidth\">\r\n            <el-cascader\r\n              :options=\"options\"\r\n              :props=\"props\"\r\n              clearable>\r\n            </el-cascader>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div class=\"demo-drawer__footer\">\r\n          <el-button @click=\"cancelForm\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"$refs.drawer.closeDrawer()\" :loading=\"loading\">{{ loading ? '提交中 ...' : '确 定' }}</el-button>\r\n        </div>\r\n      </div>\r\n    </el-drawer>\r\n    \r\n  </div>\r\n  \r\n</template>\r\n\r\n\r\n<script>\r\n\r\nimport axios from 'axios';\r\nexport default{\r\n    name:'Exam',\r\n    data(){\r\n        return {\r\n            tableData: {\r\n          id:'',\r\n          examName: '',\r\n          date: '',\r\n          status: ''\r\n        },\r\n        ExamlogVisible: false,\r\n        addExam: {\r\n          examName:'',\r\n          description:'',\r\n          date:'',\r\n          status: '',\r\n                },\r\n        search: '',\r\n        clearData:[{\r\n          examName:'sdsd',\r\n          classId:'21',\r\n          className:'1',\r\n          count:'1',\r\n          score:'1',\r\n          total:'1'\r\n        }],\r\n        addClass:{\r\n          classId:'',\r\n          classNmae:'',\r\n          school:'',\r\n        },\r\n      addClassVisible: false,\r\n      loading: false,\r\n       form: {\r\n        name: '',\r\n        region: '',\r\n        date1: '',\r\n        date2: '',\r\n        delivery: false,\r\n        type: [],\r\n        resource: '',\r\n        desc: ''\r\n      },\r\n      formLabelWidth: '80px',\r\n      timer: null,\r\n      props: { multiple: true },\r\n        options: [{\r\n          value: 1,\r\n          label: '东南',\r\n          children: [{\r\n            value: 2,\r\n            label: '上海',\r\n            children: [\r\n              { value: 3, label: '普陀' },\r\n              { value: 4, label: '黄埔' },\r\n              { value: 5, label: '徐汇' }\r\n            ]\r\n          }, {\r\n            value: 7,\r\n            label: '江苏',\r\n            children: [\r\n              { value: 8, label: '南京' },\r\n              { value: 9, label: '苏州' },\r\n              { value: 10, label: '无锡' }\r\n            ]\r\n          }, {\r\n            value: 12,\r\n            label: '浙江',\r\n            children: [\r\n              { value: 13, label: '杭州' },\r\n              { value: 14, label: '宁波' },\r\n              { value: 15, label: '嘉兴' }\r\n            ]\r\n          }]\r\n        }, {\r\n          value: 17,\r\n          label: '西北',\r\n          children: [{\r\n            value: 18,\r\n            label: '陕西',\r\n            children: [\r\n              { value: 19, label: '西安' },\r\n              { value: 20, label: '延安' }\r\n            ]\r\n          }, {\r\n            value: 21,\r\n            label: '新疆维吾尔族自治区',\r\n            children: [\r\n              { value: 22, label: '乌鲁木齐' },\r\n              { value: 23, label: '克拉玛依' }\r\n            ]\r\n          }]\r\n        }]\r\n    \r\n        }\r\n    }  , \r\n\r\nmounted() {\r\n      this.selectAll();\r\n      \r\n        },\r\nmethods:{\r\n        selectAll() {\r\n                axios.get(\"http://172.25.148.89/exams\").then(res => {                   \r\n                    this.tableData = res.data.data; \r\n                                     \r\n                })\r\n            },\r\n        handleaddExam(){\r\n          \r\n                axios.post(\"http://172.25.148.89/exams\",this.addExam).then(res => {\r\n                    this.ExamlogVisible = false;  \r\n                    if (res.data.code==20011) {\r\n                      this.$message.success('添加成功');\r\n                      this.selectAll();\r\n                    }  else if(res.data.code==20010){\r\n                      this.$message.error('添加失败');\r\n                    }\r\n                    this.addExam.examName = '',   \r\n                    this.addExam.description = '', \r\n                    this.addExam.date = '', \r\n                    this.addExam.status = ''          \r\n                                                \r\n                })\r\n                \r\n            },\r\n        selectClearData(row) {\r\n                \r\n                axios.get(\"http://172.25.148.89/texam/\"+row.id).then(res => { \r\n                    this.clearData = res.data.data; \r\n                })\r\n            },\r\n      handleClose(done) {\r\n      if (this.loading) {\r\n        return;\r\n      }\r\n      this.$confirm('确定要提交表单吗？')\r\n        .then(_ => {\r\n          this.loading = true;\r\n          this.timer = setTimeout(() => {\r\n            done();\r\n            // 动画关闭需要一定的时间\r\n            setTimeout(() => {\r\n              this.loading = false;\r\n            }, 400);\r\n          }, 2000);\r\n        })\r\n        .catch(_ => {});\r\n    },\r\n    cancelForm() {\r\n      this.loading = false;\r\n      this.addClassVisible = false;\r\n      clearTimeout(this.timer);\r\n    }\r\n  }\r\n     \r\n     \r\n}\r\n</script>\r\n\r\n<style>\r\n  .el-table .warning-row {\r\n    background: oldlace;\r\n  }\r\n\r\n  .el-table .success-row {\r\n    background: #f0f9eb;\r\n  }\r\n</style>\r\n\r\n"]},"metadata":{},"sourceType":"module"}